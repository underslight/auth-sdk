!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("axios")):"function"==typeof define&&define.amd?define(["exports","axios"],e):e((t||self).auth={},t.axios)}(this,function(t,e){function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=/*#__PURE__*/n(e);t.ApiErrorCode=void 0,(t.ApiErrorCode||(t.ApiErrorCode={})).UserNotFound="USER_NOT_FOUND";var i=function(t){this.client=void 0,this.client=r.default.create({withCredentials:!0,baseURL:t.domain})},o=/*#__PURE__*/function(){function t(t){this.config=void 0,this.client=void 0,this.config=t,this.client=new i(this.config)}var e=t.prototype;return e.authenticate=function(t){return t.authenticate(this.client)},e.register=function(t){return t.register(this.client)},t}(),a=/*#__PURE__*/function(){function t(t){var e=t.id,n=t.attributes,r=t.metadata;this.id=void 0,this.attributes=void 0,this.metadata=void 0,this.id=e,this.attributes=n,this.metadata=r}var e=t.prototype;return e.linkMfaMethod=function(t,e){var n=this;return new Promise(function(r,i){try{return Promise.resolve(e.link(t.client).then(function(t){return r(n)}).catch(function(t){return i(t)})).then(function(){})}catch(t){return Promise.reject(t)}})},e.unlinkMfaMethod=function(t,e){var n=this;return new Promise(function(r,i){try{return Promise.resolve(e.unlink(t.client).then(function(t){return r(n)}).catch(function(t){return i(t)})).then(function(){})}catch(t){return Promise.reject(t)}})},t}();t.AuthMethodType=void 0,(t.AuthMethodType||(t.AuthMethodType={})).EmailPassword="EmailPassword",t.MfaMethodType=void 0,(t.MfaMethodType||(t.MfaMethodType={})).Totp="Totp";var s=/*#__PURE__*/function(){function e(e,n,r){this.type=t.AuthMethodType.EmailPassword,this.mfa_code=void 0,this.email=void 0,this.password=void 0,this.email=e,this.password=n,this.mfa_code=r}var n=e.prototype;return n.setMfaCode=function(t){this.mfa_code=t},n.authenticate=function(t){var e=this;return new Promise(function(n,r){try{return Promise.resolve(t.client.post("/authenticate/"+e.type,{email:e.email,password:e.password,mfa_code:e.mfa_code}).then(function(t){return n(new a(t.data.user))}).catch(function(t){return r(t.response.data)})).then(function(){})}catch(t){return Promise.reject(t)}})},n.register=function(t){var e=this;return new Promise(function(n,r){try{return Promise.resolve(t.client.post("/register/"+e.type,{email:e.email,password:e.password}).then(function(t){return n(new a(t.data.user))}).catch(function(t){return r(t.response.data)})).then(function(){})}catch(t){return Promise.reject(t)}})},e}(),u=/*#__PURE__*/function(){function e(){this.type=t.MfaMethodType.Totp}var n=e.prototype;return n.link=function(t){var e=this;return new Promise(function(n,r){try{return Promise.resolve(t.client.post("/link/mfa",{mfa_method:e.type}).then(function(t){return n()}).catch(function(t){return r(t.response.data)})).then(function(){})}catch(t){return Promise.reject(t)}})},n.unlink=function(t){var e=this;return new Promise(function(n,r){try{return Promise.resolve(t.client.delete("/unlink/mfa",{data:{mfa_method:e.type}}).then(function(t){return n()}).catch(function(t){return r(t.response.data)})).then(function(){})}catch(t){return Promise.reject(t)}})},e}();t.EmailPasswordMethod=s,t.TotpMethod=u,t.UnderslightAuth=o,t.User=a});
