function t(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var e,n=/*#__PURE__*/t(require("axios"));exports.ApiErrorCode=void 0,(e=exports.ApiErrorCode||(exports.ApiErrorCode={})).UserNotFound="USER_NOT_FOUND",e.UserDisabled="USER_DISABLED",e.HashFailed="HASH_FAILED",e.CredentialDuplicate="CREDENTIAL_DUPLICATE",e.CredentialOnly="CREDENTIAL_ONLY",e.CredentialNotFound="CREDENTIAL_NOT_FOUND",e.MfaRequired="MFA_REQUIRED",e.Io="IO",e.SaveFailed="SAVE_FAILED",e.UpdateFailed="UPDATE_FAILED",e.TokenExpired="TOKEN_EXPIRED",e.TokenInvalid="TOKEN_INVALID",e.DatabaseFailed="DATABASE_OP_FAILED",e.Unknown="UNKNOWN";var r=function(t){this.client=void 0,this.client=n.default.create({withCredentials:!0,baseURL:t.domain})},i=/*#__PURE__*/function(){function t(t){var e=t.id,n=t.attributes,r=t.metadata;this.id=void 0,this.attributes=void 0,this.metadata=void 0,this.id=e,this.attributes=n,this.metadata=r}var e=t.prototype;return e.linkAuthMethod=function(t,e){var n=this;return new Promise(function(r,i){try{return Promise.resolve(e.link(t.client).then(function(t){return r(n)}).catch(function(t){return i(t)})).then(function(){})}catch(t){return Promise.reject(t)}})},e.unlinkAuthMethod=function(t,e){var n=this;return new Promise(function(r,i){try{return Promise.resolve(e.unlink(t.client).then(function(t){return r(n)}).catch(function(t){return i(t)})).then(function(){})}catch(t){return Promise.reject(t)}})},e.linkMfaMethod=function(t,e){var n=this;return new Promise(function(r,i){try{return Promise.resolve(e.link(t.client).then(function(t){return r(n)}).catch(function(t){return i(t)})).then(function(){})}catch(t){return Promise.reject(t)}})},e.unlinkMfaMethod=function(t,e){var n=this;return new Promise(function(r,i){try{return Promise.resolve(e.unlink(t.client).then(function(t){return r(n)}).catch(function(t){return i(t)})).then(function(){})}catch(t){return Promise.reject(t)}})},e.delete=function(t){return new Promise(function(e,n){try{return Promise.resolve(t.client.client.delete("/delete").then(function(t){return e()}).catch(function(t){return n(t.response.data)})).then(function(){})}catch(t){return Promise.reject(t)}})},e.update=function(t){var e=this;return new Promise(function(n,r){try{return Promise.resolve(t.client.client.put("/update",e.attributes).then(function(t){return n(e)}).catch(function(t){return r(t.response.data)})).then(function(){})}catch(t){return Promise.reject(t)}})},t}(),o=/*#__PURE__*/function(){function t(t){this.config=void 0,this.client=void 0,this.config=t,this.client=new r(this.config)}var e=t.prototype;return e.currentUser=function(t){var e=this;return new Promise(function(n,r){try{return t&&e.client.client.get("/current").then(function(t){return n(new i(t.data.user))}).catch(function(t){return r(t.response.data)}),Promise.resolve()}catch(t){return Promise.reject(t)}})},e.authenticate=function(t){return t.authenticate(this.client)},e.register=function(t){return t.register(this.client)},t}();exports.AuthMethodType=void 0,(exports.AuthMethodType||(exports.AuthMethodType={})).EmailPassword="EmailPassword",exports.MfaMethodType=void 0,(exports.MfaMethodType||(exports.MfaMethodType={})).Totp="Totp";var u=/*#__PURE__*/function(){function t(t,e,n){this.type=exports.AuthMethodType.EmailPassword,this.mfa_code=void 0,this.email=void 0,this.password=void 0,this.email=t,this.password=e,this.mfa_code=n}var e=t.prototype;return e.setMfaCode=function(t){this.mfa_code=t},e.authenticate=function(t,e){var n=this;return new Promise(function(r,o){try{return Promise.resolve(t.client.post("/authenticate/"+n.type,{email:n.email,password:n.password,mfa_code:n.mfa_code}).then(function(t){var n=t.data;e&&"undefined"!=typeof window&&(window.location.href=e),r(new i(n.user))}).catch(function(t){return o(t.response.data)})).then(function(){})}catch(t){return Promise.reject(t)}})},e.register=function(t,e){var n=this;return new Promise(function(r,o){try{return Promise.resolve(t.client.post("/register/"+n.type,{email:n.email,password:n.password}).then(function(t){var n=t.data;e&&"undefined"!=typeof window&&(window.location.href=e),r(new i(n.user))}).catch(function(t){return o(t.response.data)})).then(function(){})}catch(t){return Promise.reject(t)}})},e.link=function(t){var e=this;return new Promise(function(n,r){try{return Promise.resolve(t.client.post("/link/"+e.type,{email:e.email,password:e.password}).then(function(t){return n()}).catch(function(t){return r(t.response.data)})).then(function(){})}catch(t){return Promise.reject(t)}})},e.unlink=function(t){var e=this;return new Promise(function(n,r){try{return Promise.resolve(t.client.delete("/unlink/auth",{data:{auth_method:e.type}}).then(function(t){return n()}).catch(function(t){return r(t.response.data)})).then(function(){})}catch(t){return Promise.reject(t)}})},t}(),c=/*#__PURE__*/function(){function t(){this.type=exports.MfaMethodType.Totp}var e=t.prototype;return e.link=function(t){var e=this;return new Promise(function(n,r){try{return Promise.resolve(t.client.post("/link/mfa",{mfa_method:e.type}).then(function(t){return n()}).catch(function(t){return r(t.response.data)})).then(function(){})}catch(t){return Promise.reject(t)}})},e.unlink=function(t){var e=this;return new Promise(function(n,r){try{return Promise.resolve(t.client.delete("/unlink/mfa",{data:{mfa_method:e.type}}).then(function(t){return n()}).catch(function(t){return r(t.response.data)})).then(function(){})}catch(t){return Promise.reject(t)}})},t}();exports.EmailPasswordMethod=u,exports.TotpMethod=c,exports.UnderslightAuth=o,exports.User=i;
